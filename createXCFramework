 #! /bin/bash

# iOS devices
xcodebuild archive \
    -scheme TTDImagePicker \
    -archivePath "./build/ios.xcarchive" \
    -sdk iphoneos \
    SKIP_INSTALL=NO

# iOS simulator
xcodebuild archive \
    -scheme TTDImagePicker \
    -archivePath "./build/ios_sim.xcarchive" \
    -sdk iphonesimulator \
    SKIP_INSTALL=NO
BUILD_LIBRARY_FOR_DISTRIBUTION=YES


# Combine to one Framework
xcodebuild -create-xcframework \
    -framework "./build/ios.xcarchive/Products/Library/Frameworks/TTDImagePicker.framework" \
    -framework "./build/ios_sim.xcarchive/Products/Library/Frameworks/TTDImagePicker.framework" \
    -output "./build/Ta2doImagePicker.xcframework"